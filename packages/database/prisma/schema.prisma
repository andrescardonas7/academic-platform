// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Institution {
  id          String          @id @default(cuid())
  name        String
  type        String          // "PUBLIC" | "PRIVATE" | "MIXED"
  description String?
  website     String?
  logo        String?
  address     String?
  city        String
  state       String
  country     String          @default("Colombia")
  phone       String?
  email       String?
  accredited  Boolean         @default(true)
  createdAt   DateTime        @default(now())
  updatedAt   DateTime        @updatedAt

  programs Program[]

  @@map("institutions")
}

model Career {
  id          String   @id @default(cuid())
  name        String   @unique
  description String?
  field       String
  keywords    String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  programs Program[]

  @@map("careers")
}

model Program {
  id           String     @id @default(cuid())
  title        String
  modality     String     // "PRESENCIAL" | "VIRTUAL" | "HIBRIDA"
  duration     Int
  price        Float?
  currency     String     @default("COP")
  schedule     String?
  startDate    DateTime?
  programUrl   String?
  isActive     Boolean    @default(true)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt

  institution   Institution @relation(fields: [institutionId], references: [id])
  institutionId String
  career        Career      @relation(fields: [careerId], references: [id])
  careerId      String

  @@map("programs")
}

// Para SQLite, usamos Strings en lugar de enums
// enum InstitutionType {
//   PUBLIC
//   PRIVATE
//   MIXED
// }

// enum Modality {
//   PRESENCIAL
//   VIRTUAL
//   HIBRIDA
// }
